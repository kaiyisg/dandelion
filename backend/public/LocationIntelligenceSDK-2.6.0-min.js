var GEOAPIS_V1=GEOAPIS_V1||{};GEOAPIS_V1.baseService=function(a){this.accessToken="Bearer "+a;this.apiAddress="https://api.pitneybowes.com/location-intelligence/";this.response={}};GEOAPIS_V1.baseService.prototype.callApi=function(c){var a=null;this.response={};this.response.httpResponse={};try{a=$.ajax({url:this.apiAddress+c,type:"GET",async:false,headers:{"Content-type":"application/json",Accept:"application/json",Authorization:this.accessToken}});this.response.response=JSON.parse(a.responseText);if(a.status===200){this.response.status="success"}else{this.response.status="failed"}}catch(b){this.response.status="failed";if(a.responseText!==""){this.response.response=a.responseText}else{this.response.response={};this.response.response.errors=[];this.response.response.errors.push({errorCode:"GE0001",errorDescription:"Internal server error encountered."})}}this.response.httpResponse.status=a.status;this.response.httpResponse.statusText=a.statusText};GEOAPIS_V1.baseService.prototype.callApiAsync=function(apiUrl,callback){var request=$.ajax({url:this.apiAddress+apiUrl,type:"GET",async:true,headers:{"Content-type":"application/json",Accept:"application/json",Authorization:this.accessToken}}).done(function(responseData,status,xhr){this.response={};this.response.httpResponse={};this.response.httpResponse.status=xhr.status;this.response.httpResponse.statusText=xhr.statusText;this.response.response=JSON.parse(xhr.responseText);if(xhr.status===200){this.response.status="success"}else{this.response.status="failed"}var callbacks=eval(callback);if(callbacks!==undefined&&callbacks!==null){callbacks(this.response)}else{alert("Callback are not available.")}}).fail(function(xhr,status,err){this.response={};this.response.status="failed";this.response.httpResponse={};this.response.httpResponse.status=xhr.status;this.response.httpResponse.statusText=xhr.statusText;if(xhr.responseText!==""){this.response.response=xhr.responseText}else{this.response.response={};this.response.response.errors=[];this.response.response.errors.push({errorCode:"GE0001",errorDescription:"Internal server error encountered."})}var callbacks=eval(callback);if(callbacks!==undefined&&callbacks!==null){callbacks(this.response)}else{alert("Callback are not available.")}})};GEOAPIS_V1.baseService.prototype.callPostApi=function(d,a){var b=null;this.response={};this.response.httpResponse={};try{b=$.ajax({url:this.apiAddress+d,type:"POST",data:a,async:false,headers:{"Content-type":"application/json",Accept:"application/json",Authorization:this.accessToken}});this.response.response=JSON.parse(b.responseText);if(b.status===200){this.response.status="success"}else{this.response.status="failed"}}catch(c){this.response.status="failed";if(b.responseText!==""){this.response.response=b.responseText}else{this.response.response={};this.response.response.errors=[];this.response.response.errors.push({errorCode:"GE0001",errorDescription:"Internal server error encountered."})}}this.response.httpResponse.status=b.status;this.response.httpResponse.statusText=b.statusText};GEOAPIS_V1.baseService.prototype.callPostApiAsync=function(apiUrl,postData,callback){var request=$.ajax({url:this.apiAddress+apiUrl,type:"POST",data:postData,async:true,headers:{"Content-type":"application/json",Accept:"application/json",Authorization:this.accessToken}}).done(function(responseData,status,xhr){this.response={};this.response.httpResponse={};this.response.httpResponse.status=xhr.status;this.response.httpResponse.statusText=xhr.statusText;this.response.response=JSON.parse(xhr.responseText);if(xhr.status===200){this.response.status="success"}else{this.response.status="failed"}var callbacks=eval(callback);if(callbacks!==undefined&&callbacks!==null){callbacks(this.response)}else{alert("Callback are not available.")}}).fail(function(xhr,status,err){this.response={};this.response.status="failed";this.response.httpResponse={};this.response.httpResponse.status=xhr.status;this.response.httpResponse.statusText=xhr.statusText;if(xhr.responseText!==""){this.response.response=xhr.responseText}else{this.response.response={};this.response.response.errors=[];this.response.response.errors.push({errorCode:"GE0001",errorDescription:"Internal server error encountered."})}var callbacks=eval(callback);if(callbacks!==undefined&&callbacks!==null){callbacks(this.response)}else{alert("Callback are not available.")}})};GEOAPIS_V1.baseService.prototype.apiGetUrl=function(d,b,c){for(var a in d){if(b.indexOf(a)>=0){if(d[a]!==null&&d[a]!==undefined){c+=this.queryDelimiter(c)+a+"="+encodeURIComponent(d[a])}}}return c};GEOAPIS_V1.baseService.prototype.queryDelimiter=function(b){var a="&";if(b.search("\\?")<0){a="?"}return a};function GEOAPIS_V1_INHERIT(c,a){var b=new c();a.prototype=b;a.prototype.constructor=a}GEOAPIS_V1.geo911=function(a){GEOAPIS_V1.baseService.call(this,a)};GEOAPIS_V1_INHERIT(GEOAPIS_V1.baseService,GEOAPIS_V1.geo911);GEOAPIS_V1.geo911.prototype.getPSAPByAddress=function(b,c){var a="/geo911/v1/psap/byaddress?address="+encodeURIComponent(b.address);if(c!==undefined){this.callApiAsync(a,c)}else{this.callApi(a);return this.response}};GEOAPIS_V1.geo911.prototype.getPSAPByLocation=function(b,c){var a="/geo911/v1/psap/bylocation?latitude="+encodeURIComponent(b.latitude)+"&longitude="+encodeURIComponent(b.longitude);if(c!==undefined){this.callApiAsync(a,c)}else{this.callApi(a);return this.response}};GEOAPIS_V1.geo911.prototype.getAHJPLUSPSAPByAddress=function(b,c){var a="/geo911/v1/ahj-psap/byaddress?address="+encodeURIComponent(b.address);if(c!==undefined){this.callApiAsync(a,c)}else{this.callApi(a);return this.response}};GEOAPIS_V1.geo911.prototype.getAHJPLUSPSAPByLocation=function(b,c){var a="/geo911/v1/ahj-psap/bylocation?latitude="+encodeURIComponent(b.latitude)+"&longitude="+encodeURIComponent(b.longitude);if(c!==undefined){this.callApiAsync(a,c)}else{this.callApi(a);return this.response}};GEOAPIS_V1.geoCode=function(a){GEOAPIS_V1.baseService.call(this,a)};GEOAPIS_V1_INHERIT(GEOAPIS_V1.baseService,GEOAPIS_V1.geoCode);GEOAPIS_V1.geoCode.prototype.getCapabilities=function(c,d){var b="/geocode-service/v1/transient/"+encodeURIComponent(c.bundleType)+"/capabilities";var a=["country","operation"];b=this.apiGetUrl(c,a,b);if(d!==undefined){this.callApiAsync(b,d)}else{this.callApi(b);return this.response}};GEOAPIS_V1.geoCode.prototype.getConfigureDictionary=function(c,d){var b="/geocode-service/v1/transient/"+encodeURIComponent(c.bundleType)+"/dictionaries";var a=["country"];b=this.apiGetUrl(c,a,b);if(d!==undefined){this.callApiAsync(b,d)}else{this.callApi(b);return this.response}};GEOAPIS_V1.geoCode.prototype.getGeocode=function(c,d){var b="/geocode-service/v1/transient/"+encodeURIComponent(c.bundleType)+"/geocode";var a=["country","mainAddress","placeName","lastLine","areaName1","areaName2","areaName3","areaName4","postCode1","postCode2","matchMode","fallbackGeo","fallbackPostal","maxCands","streetOffset","streetOffsetUnits","cornerOffset","cornerOffsetUnits"];b=this.apiGetUrl(c,a,b);if(d!==undefined){this.callApiAsync(b,d)}else{this.callApi(b);return this.response}};GEOAPIS_V1.geoCode.prototype.getReverseGeocode=function(c,d){var b="/geocode-service/v1/transient/"+encodeURIComponent(c.bundleType)+"/reverseGeocode?x="+encodeURIComponent(c.x)+"&y"+encodeURIComponent(c.y);var a=["country","coordSysName","distance","distanceUnits"];b=this.apiGetUrl(c,a,b);if(d!==undefined){this.callApiAsync(b,d)}else{this.callApi(b);return this.response}};GEOAPIS_V1.geoCode.prototype.getGeocodeAdvanced=function(c,d){var b="/geocode-service/v1/transient/"+encodeURIComponent(c.bundleType)+"/geocode";var a='{"type": "'+c.type+'", "preferences":'+c.preferences+', "addresses":'+c.addresses+"}";if(d!==undefined){this.callPostApiAsync(b,a,d)}else{this.callPostApi(b,a);return this.response}};GEOAPIS_V1.geoCode.prototype.getReverseGeocodeAdvance=function(c,d){var b="/geocode-service/v1/transient/"+encodeURIComponent(c.bundleType)+"/reverseGeocode";var a='{"preferences":'+c.preferences+', "points":'+c.points+"}";if(d!==undefined){this.callPostApiAsync(b,a,d)}else{this.callPostApi(b,a);return this.response}};GEOAPIS_V1.geoComm=function(a){GEOAPIS_V1.baseService.call(this,a)};GEOAPIS_V1_INHERIT(GEOAPIS_V1.baseService,GEOAPIS_V1.geoComm);GEOAPIS_V1.geoComm.prototype.getRateCenterByAddress=function(c,d){var b="/geocomm/v1/ratecenter/byaddress?address="+encodeURIComponent(c.address);var a=["level","country","areaCodeInfo"];b=this.apiGetUrl(c,a,b);if(d!==undefined){this.callApiAsync(b,d)}else{this.callApi(b);return this.response}};GEOAPIS_V1.geoComm.prototype.getRateCenterByLocation=function(c,d){var b="/geocomm/v1/ratecenter/bylocation?latitude="+encodeURIComponent(c.latitude)+"&longitude="+encodeURIComponent(c.longitude);var a=["level","areaCodeInfo"];b=this.apiGetUrl(c,a,b);if(d!==undefined){this.callApiAsync(b,d)}else{this.callApi(b);return this.response}};GEOAPIS_V1.geoEnhance=function(a){GEOAPIS_V1.baseService.call(this,a)};GEOAPIS_V1_INHERIT(GEOAPIS_V1.baseService,GEOAPIS_V1.geoEnhance);GEOAPIS_V1.geoEnhance.prototype.getAddress=function(c,d){var b="/geoenhance/v1/address/bylocation?latitude="+encodeURIComponent(c.latitude)+"&longitude="+encodeURIComponent(c.longitude);var a=["searchRadius","searchRadiusUnit"];b=this.apiGetUrl(c,a,b);if(d!==undefined){this.callApiAsync(b,d)}else{this.callApi(b);return this.response}};GEOAPIS_V1.geoEnhance.prototype.getPlace=function(c,d){var b="/geoenhance/v1/place/bylocation?latitude="+encodeURIComponent(c.latitude)+"&longitude="+encodeURIComponent(c.longitude);var a=["levelHint"];b=this.apiGetUrl(c,a,b);if(d!==undefined){this.callApiAsync(b,d)}else{this.callApi(b);return this.response}};GEOAPIS_V1.geoEnhance.prototype.getPOI=function(c,d){var b="/geoenhance/v1/poi/bylocation?latitude="+encodeURIComponent(c.latitude)+"&longitude="+encodeURIComponent(c.longitude);var a=["category","searchRadius","maxCandidates","searchRadiusUnit","searchPriority","searchDataset"];b=this.apiGetUrl(c,a,b);if(d!==undefined){this.callApiAsync(b,d)}else{this.callApi(b);return this.response}};GEOAPIS_V1.geoEnhance.prototype.getTimezone=function(b,c){var a="/geoenhance/v1/timezone/bylocation?latitude="+encodeURIComponent(b.latitude)+"&longitude="+encodeURIComponent(b.longitude)+"&timestamp="+encodeURIComponent(b.timestamp);if(c!==undefined){this.callApiAsync(a,c)}else{this.callApi(a);return this.response}};GEOAPIS_V1.geoLife=function(a){GEOAPIS_V1.baseService.call(this,a)};GEOAPIS_V1_INHERIT(GEOAPIS_V1.baseService,GEOAPIS_V1.geoLife);GEOAPIS_V1.geoLife.prototype.getDemographicByAddress=function(c,d){var b="/geolife/v1/demographics/byaddress?address="+encodeURIComponent(c.address);var a=["filter","profile","country"];b=this.apiGetUrl(c,a,b);if(d!==undefined){this.callApiAsync(b,d)}else{this.callApi(b);return this.response}};GEOAPIS_V1.geoLife.prototype.getDemographicByLocation=function(c,d){var b="/geolife/v1/demographics/bylocation?latitude="+encodeURIComponent(c.latitude)+"&longitude="+encodeURIComponent(c.longitude);var a=["filter","profile"];b=this.apiGetUrl(c,a,b);if(d!==undefined){this.callApiAsync(b,d)}else{this.callApi(b);return this.response}};GEOAPIS_V1.geoLife.prototype.getSegmentationByAddress=function(c,d){var b="/geolife/v1/segmentation/byaddress?address="+encodeURIComponent(c.address);var a=["country"];b=this.apiGetUrl(c,a,b);if(d!==undefined){this.callApiAsync(b,d)}else{this.callApi(b);return this.response}};GEOAPIS_V1.geoLife.prototype.getSegmentationByLocation=function(b,c){var a="/geolife/v1/segmentation/bylocation?latitude="+encodeURIComponent(b.latitude)+"&longitude="+encodeURIComponent(b.longitude);if(c!==undefined){this.callApiAsync(a,c)}else{this.callApi(a);return this.response}};GEOAPIS_V1.geoMap=function(a){this.apiKey=a;GEOAPIS_V1.baseService.call(this,"")};GEOAPIS_V1_INHERIT(GEOAPIS_V1.baseService,GEOAPIS_V1.geoMap);GEOAPIS_V1.geoMap.prototype.getGeoMapRaster=function(f,a,h,d,e){$("#"+d).html("");$("<div></div>",{id:"geoAPI-geoMap-raster"}).appendTo("#"+d);$("<div></div>",{id:"geoAPI-geoMap-raster-logo"}).appendTo("#"+d);$("#geoAPI-geoMap-raster").css("position","absolute");$("#geoAPI-geoMap-raster").css("width","100%");$("#geoAPI-geoMap-raster").css("height","100%");$("<img/>",{src:"https://developer2.pitneybowes.com/en/pitneyboweslogo.png"}).appendTo("#geoAPI-geoMap-raster-logo");$("#geoAPI-geoMap-raster-logo").css("position","absolute");$("#geoAPI-geoMap-raster-logo").css("bottom","0px");$("#geoAPI-geoMap-raster-logo").css("z-index","4");var b=L.map("geoAPI-geoMap-raster");b.setView([f,a],h);var g="bronze";if(e=="bronze"||e=="iron"||e=="steel"){g=e}var i=this.apiAddress+"/geomap/v1/tile/osm/{z}/{x}/{y}.png?api_key="+this.apiKey+"&theme="+g;var c=L.tileLayer(i,{attribution:'<a target="_blank" href="https://carto.com/attributions">&copy; CARTO</a> | <a target="_blank" href="http://www.openstreetmap.org/copyright">&copy; OpenStreetMap contributors</a>'}).addTo(b);return b};GEOAPIS_V1.geoMap.prototype.getGeoMapVector=function(g,a,i,d,e){var f=this;$("#"+d).html("");$("<div></div>",{id:"geoAPI-geoMap-vector"}).appendTo("#"+d);$("<div></div>",{id:"geoAPI-geoMap-vector-logo"}).appendTo("#"+d);$("#geoAPI-geoMap-vector").css("position","absolute");$("#geoAPI-geoMap-vector").css("width","100%");$("#geoAPI-geoMap-vector").css("height","100%");$("<img/>",{src:"https://developer2.pitneybowes.com/en/pitneyboweslogo.png"}).appendTo("#geoAPI-geoMap-vector-logo");$("#geoAPI-geoMap-vector-logo").css("position","absolute");$("#geoAPI-geoMap-vector-logo").css("bottom","0px");$("#geoAPI-geoMap-vector-logo").css("z-index","4");var b=L.map("geoAPI-geoMap-vector");b.setView([g,a],i);var h="bronze";if(e=="bronze"||e=="iron"||e=="steel"){h=e}var c=Tangram.leafletLayer({scene:"resources/"+h+".yaml",attribution:'<a target="_blank" href="https://carto.com/attributions">&copy; CARTO</a> | <a target="_blank" href="http://www.openstreetmap.org/copyright">&copy; OpenStreetMap contributors</a> | <a target="_blank" href="http://mapzen.com">&copy; Mapzen</a>',introspection:true}).addTo(b);return b};GEOAPIS_V1.geoSearch=function(a){GEOAPIS_V1.baseService.call(this,a)};GEOAPIS_V1_INHERIT(GEOAPIS_V1.baseService,GEOAPIS_V1.geoSearch);GEOAPIS_V1.geoSearch.prototype.getLocation=function(c,d){var b="/geosearch/v1/locations?searchText="+encodeURIComponent(c.searchText);var a=["latitude","longitude","country","maxCandidates","searchRadius","searchRadiusUnit"];b=this.apiGetUrl(c,a,b);if(d!==undefined){this.callApiAsync(b,d)}else{this.callApi(b);return this.response}};GEOAPIS_V1.geoTax=function(a){GEOAPIS_V1.baseService.call(this,a)};GEOAPIS_V1_INHERIT(GEOAPIS_V1.baseService,GEOAPIS_V1.geoTax);GEOAPIS_V1.geoTax.prototype.getTaxRateByAddress=function(b,c){var a="/geotax/v1/taxrate/"+encodeURIComponent(b.taxType)+"/byaddress?address="+encodeURIComponent(b.address);if(c!==undefined){this.callApiAsync(a,c)}else{this.callApi(a);return this.response}};GEOAPIS_V1.geoTax.prototype.getTaxRateByLocation=function(b,c){var a="/geotax/v1/taxrate/"+encodeURIComponent(b.taxType)+"/bylocation?latitude="+encodeURIComponent(b.latitude)+"&longitude="+encodeURIComponent(b.longitude);if(c!==undefined){this.callApiAsync(a,c)}else{this.callApi(a);return this.response}};GEOAPIS_V1.geoTax.prototype.getTaxByAddress=function(b,c){var a="/geotax/v1/tax/"+encodeURIComponent(b.taxType)+"/byaddress?address="+encodeURIComponent(b.address)+"&purchaseAmount="+encodeURIComponent(b.purchaseAmount);if(c!==undefined){this.callApiAsync(a,c)}else{this.callApi(a);return this.response}};GEOAPIS_V1.geoTax.prototype.getTaxByLocation=function(b,c){var a="/geotax/v1/tax/"+encodeURIComponent(b.taxType)+"/bylocation?latitude="+encodeURIComponent(b.latitude)+"&longitude="+encodeURIComponent(b.longitude)+"&purchaseAmount="+encodeURIComponent(b.purchaseAmount);if(c!==undefined){this.callApiAsync(a,c)}else{this.callApi(a);return this.response}};GEOAPIS_V1.geoTax.prototype.getAdvancedTaxRateByAddress=function(c,d){var b="/geotax/v1/taxrate/"+encodeURIComponent(c.taxType)+"/byaddress";var a='{"preferences":'+c.preferences+', "taxRateAddresses":'+c.taxRateAddresses+"}";if(d!==undefined){this.callPostApiAsync(b,a,d)}else{this.callPostApi(b,a);return this.response}};GEOAPIS_V1.geoTax.prototype.getAdvancedTaxRateByLocation=function(c,d){var b="/geotax/v1/taxrate/"+encodeURIComponent(c.taxType)+"/bylocation";var a='{"preferences":'+c.preferences+', "locations":'+c.locations+"}";if(d!==undefined){this.callPostApiAsync(b,a,d)}else{this.callPostApi(b,a);return this.response}};GEOAPIS_V1.geoTax.prototype.getAdvancedTaxByAddress=function(c,d){var b="/geotax/v1/tax/"+encodeURIComponent(c.taxType)+"/byaddress";var a='{"preferences":'+c.preferences+', "taxAddresses":'+c.taxAddresses+"}";if(d!==undefined){this.callPostApiAsync(b,a,d)}else{this.callPostApi(b,a);return this.response}};GEOAPIS_V1.geoTax.prototype.getAdvancedTaxByLocation=function(c,d){var b="/geotax/v1/tax/"+encodeURIComponent(c.taxType)+"/bylocation";var a='{"preferences":'+c.preferences+', "locations":'+c.locations+"}";if(d!==undefined){this.callPostApiAsync(b,a,d)}else{this.callPostApi(b,a);return this.response}};